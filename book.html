<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prakriti Homeopathy Clinic</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="style2.css">
</head>

<body class="bookie" onload="fun()">
    <script src="script2.js"></script>

    <header class="header">
        <a href="" class="logo"><img src="log.jpg" alt="" height="55" width="60"></a>
        <nav class="navbar">
            <a href="index.html">Home</a>
            <a href="about.html">About</a>
            <a href="gallery1.html">Gallery</a>
            <a href="testimonials.html">Testimonials</a>
            <a href="contact.html">Contact</a>
            <a href="book.html">Book appointment</a>
            <a id="userNaam">Login/SignUp</a>
            <!-- <i id="exit" onclick="fun()" class="fa fa-sign-out" aria-hidden="true"></i> -->
        </nav>

        <div id="menu-btn" class="fas fa-bars"></div>
    </header>
    <section class="book">
        <h1 class="heading"><span>book your</span> appointment</h1>
        <div class="row">

            <form action="" onsubmit="onsubmit=setTimeout(function(){window.location.reload();},10);book()">
                <h3>Book your Appointment</h3>
                <input id="pname" type="text" placeholder="Patient Name" class="box">
                <input id="page" type="number" placeholder="Age" class="box">
                <input id="pdate" type="date" placeholder="Appointment date" class="box">
                
                <input id="ptime" type="time" placeholder="Appointment Time" class="box" min="09:00" max="17:00">
                <input id="pphone" type="number" placeholder="Phone" class="box">
                
                <input id="input" list="dropdown" placeholder="Choose Your Gender" class="box">
                <datalist id="dropdown">
                    <option value="Select"></option>
                    <option value="Male"></option>
                    <option value="Fe-male"></option>
                    <option value="other"></option>
                </datalist>
                <input id="drinput" list="dropdown1" placeholder="Choose Your Doctor" class="box">
                <datalist id="dropdown1">
                    <option value="Select"></option>
                    <option value="Dr. Prashant"></option>
                    <option value="Dr. Kritika"></option>
                </datalist>
                <input id="pemail" type="email" placeholder="Your Email" class="box">
                <input type="submit" value="Book Now" class="btn">
            </form>
            
        </div>
    </section>
    <section id="dashboard">
    <table>
        <thead>
          <tr>
            <th>Patient Name</th>
            <th>Age</th>
            <th>Gender</th>
            <th>Date</th>
            <th>Time</th>
            <th>Doctor</th>
            <th>Phone</th>
            <th>Report</th>
          </tr>
        </thead>
        <tbody id="table">

        </tbody>
      </table>
      </section>
    <button type="button" onclick="fetchuserappoint()">click here</button>
    <section class="services" id="services">
        <h1 class="heading">our <span>services</span></h1>
        <div class="box-container">
            <div class="box">
                <i class="fas fa-notes-medical"></i>
                <h3>one tym consultancy fee</h3>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Doloribus facere ut veritatis ea
                    voluptatibus tempore explicabo voluptatem, consequatur aliquam quo blanditiis numquam perspiciatis
                    natus quia placeat eveniet magnam, obcaecati exercitationem?</p>
                <a href="#" class="btn">learn more <span class="fa-sharp fa-solid fa-circle-chevron-right"></span></a>
            </div>
            <div class="box">
                <i class="fas fa-ambulance"></i>
                <h3>one tym consultancy fee</h3>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Doloribus facere ut veritatis ea
                    voluptatibus tempore explicabo voluptatem, consequatur aliquam quo blanditiis numquam perspiciatis
                    natus quia placeat eveniet magnam, obcaecati exercitationem?</p>
                <a href="#" class="btn">learn more <span class="fa-sharp fa-solid fa-circle-chevron-right"></span></a>
            </div>
            <div class="box">
                <i class="fas fa-user-md"></i>
                <h3>one tym consultancy fee</h3>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Doloribus facere ut veritatis ea
                    voluptatibus tempore explicabo voluptatem, consequatur aliquam quo blanditiis numquam perspiciatis
                    natus quia placeat eveniet magnam, obcaecati exercitationem?</p>
                <a href="#" class="btn">learn more <span class="fa-sharp fa-solid fa-circle-chevron-right"></span></a>
            </div>
            <div class="box">
                <i class="fas fa-pills"></i>
                <h3>one tym consultancy fee</h3>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Doloribus facere ut veritatis ea
                    voluptatibus tempore explicabo voluptatem, consequatur aliquam quo blanditiis numquam perspiciatis
                    natus quia placeat eveniet magnam, obcaecati exercitationem?</p>
                <a href="#" class="btn">learn more <span class="fa-sharp fa-solid fa-circle-chevron-right"></span></a>
            </div>
            <div class="box">
                <i class="fas fa-procedures"></i>
                <h3>one tym consultancy fee</h3>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Doloribus facere ut veritatis ea
                    voluptatibus tempore explicabo voluptatem, consequatur aliquam quo blanditiis numquam perspiciatis
                    natus quia placeat eveniet magnam, obcaecati exercitationem?</p>
                <a href="#" class="btn">learn more <span class="fa-sharp fa-solid fa-circle-chevron-right"></span></a>
            </div>
            <div class="box">
                <i class="fas fa-heartbeat"></i>
                <h3>one tym consultancy fee</h3>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Doloribus facere ut veritatis ea
                    voluptatibus tempore explicabo voluptatem, consequatur aliquam quo blanditiis numquam perspiciatis
                    natus quia placeat eveniet magnam, obcaecati exercitationem?</p>
                <a href="#" class="btn">learn more <span class="fa-sharp fa-solid fa-circle-chevron-right"></span></a>
            </div>
        </div>
    </section>
    <section class="contact">
        <div class="content">
            <h2>Contact Us</h2>
            <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Accusamus nihil sunt aperiam placeat cum
                minima, ab beatae commodi non molestiae sit voluptatibus optio tenetur rerum hic nemo reprehenderit quis
                necessitatibus.</p>
        </div>
        <div class="container">
            <div class="contactInfo">
                <div class="bo">
                    <div class="ico"><i class="fa-sharp fa-solid fa-location-dot"></i></div>
                    <div class="text">
                        <h3>Address</h3>
                        <p>ghfgbfhj,<br>hvhfmdhjhfdjh,<br>ytwhgyahgfj</p>
                    </div>
                </div>
                <div class="bo">
                    <div class="ico"><i class="fa fa-envelope" aria-hidden="true"></i></div>
                    <div class="text">
                        <h3>Email-id</h3>
                        <p>ygehfwag@gmail.com</p>
                    </div>
                </div>
                <div class="bo">
                    <div class="ico"><i class="fa fa-phone" aria-hidden="true"></i></div>
                    <div class="text">
                        <h3>Phone</h3>
                        <p>+91-9996848046</p>
                    </div>
                </div>
            </div>
            <div class="contactForm">
                <form onsubmit="sendEmail(); reset(); return false;">
                    <h2>Send Message</h2>
                    <div class="inputbox">
                        <input type="text" id="name" required="required">
                        <span>Full Name</span>
                    </div>
                    <div class="inputbox">
                        <input type="text" id="email" required="required">
                        <span>Email-id</span>
                    </div>
                    <div class="inputbox">
                        <textarea id="message" required="required"></textarea>
                        <span>Type your Message...</span>
                    </div>
                    <div class="inputbox">
                        <input type="submit" name="" value="Send">
                    </div>
                </form>
            </div>
        </div>
    </section>
    <script>
        var input = document.getElementById("input");
        var datalist = document.getElementById("dropdown");

        input.addEventListener("click", function () {
            datalist.style.display = datalist.style.display === "block" ? "none" : "block";
        });

        datalist.addEventListener("change", function () {
            input.value = datalist.options[datalist.selectedIndex].value;
            datalist.selectedIndex = -1;
            datalist.style.display = "none";
        });
    </script>
    <script src="script.js"></script>
    <script src="https://smtpjs.com/v3/smtp.js"></script>
    <script>
        function sendEmail() {
            Email.send({
                Host: "smtp.elasticemail.com",
                Username: "abhimanyu.9981@gmail.com",
                Password: "750C4FE6FD617B8EB8061A1166BF518DE033",
                To: "mishraabhinay814@gmail.com",
                From: document.getElementById("email").value,
                Subject: "New Contact Form",
                Body: "Name: " + document.getElementById("name").value
                    + "<br> Email: " + document.getElementById("email").value
                    + "<br> Message: " + document.getElementById("message").value
            }).then(
                message => alert(message)
            );
        }

    </script>
    <script>
         const Token = localStorage.getItem("authToken")
        async function book () {
           
            console.log(Token);
            const name=document.getElementById("pname").value
            const age=document.getElementById("page").value
            const date=document.getElementById("pdate").value
            const time=document.getElementById("ptime").value
            const gender=document.getElementById("input").value
            const doctor=document.getElementById("drinput").value
            const email=document.getElementById("pemail").value
            const phone=document.getElementById("pphone").value

            console.log(JSON.stringify({name,age,date,time,gender,doctor,email,phone }));
            const response = await fetch("http://localhost:5000/api/notes/addnotes", {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    "auth-token": Token
                },
                body: JSON.stringify({name,age,date,time,gender,doctor,email,phone })
            })
            const json = response.json()
            return json
        }


        async function fetchuserappoint(){
            console.log("object");
        const response = await fetch(`http://localhost:5000/api/notes/fetchusernotes`, {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json',
          'auth-token': Token
        },
      })
      try {
        const array = await response.json()
        console.log(array);
        array.map(myFunction);
      } catch (error) {
        console.log("error", error);
      }
    }

    function myFunction(item) {
      var result = "<tr>" +
        "<td>" + item.name + "</td>" +
        "<td>" + item.age + "</td>" +
        "<td>" + item.gender + "</td>"+
        "<td>" + item.date + "</td>" +
        "<td>" + item.time + "</td>" +
        "<td>" + item.doctor + "</td>" +
        "<td>" + item.phone + "</td>" +
        "<td><a target='_blank' href=" + item.pdf[0] + ">REPORT</a></td>" +
    "</tr>";
      document.getElementById("table").innerHTML += result
    }

    </script>
</body>

</html>